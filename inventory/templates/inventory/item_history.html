{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fire &amp; Risk Alliance - Item History</title>
    <style>
        :root {
            --md-sys-color-primary: #8b1a1a;
            --md-sys-color-on-primary: #ffffff;
            --md-sys-color-primary-container: #ffdad5;
            --md-sys-color-on-primary-container: #410001;
            --md-sys-color-secondary: #775652;
            --md-sys-color-on-secondary: #ffffff;
            --md-sys-color-secondary-container: #ffdad5;
            --md-sys-color-on-secondary-container: #2c1512;
            --md-sys-color-tertiary: #705c2e;
            --md-sys-color-on-tertiary: #ffffff;
            --md-sys-color-tertiary-container: #fcdfa6;
            --md-sys-color-on-tertiary-container: #261a00;
            --md-sys-color-error: #ba1a1a;
            --md-sys-color-on-error: #ffffff;
            --md-sys-color-error-container: #ffdad6;
            --md-sys-color-on-error-container: #410002;
            --md-sys-color-background: #fff8f6;
            --md-sys-color-on-background: #201a19;
            --md-sys-color-surface: #fff8f6;
            --md-sys-color-on-surface: #201a19;
            --md-sys-color-on-surface-variant: #534341;
            --md-sys-color-surface-container-lowest: #ffffff;
            --md-sys-color-surface-container-low: #fef1ef;
            --md-sys-color-surface-container: #f8ebe9;
            --md-sys-color-surface-container-high: #f3e5e2;
            --md-sys-color-surface-container-highest: #ede0dd;
            --md-sys-color-surface-dim: #e6d9d6;
            --md-sys-color-outline: #857371;
            --md-sys-color-outline-variant: #d8c2bf;
            --md-sys-color-inverse-surface: #362f2e;
            --md-sys-color-inverse-on-surface: #fbeeeb;
            --md-sys-color-inverse-primary: #ffb4ab;
        }
        body.dark-mode {
            --md-sys-color-primary: #ffb4ab;
            --md-sys-color-on-primary: #690005;
            --md-sys-color-primary-container: #930006;
            --md-sys-color-on-primary-container: #ffdad5;
            --md-sys-color-secondary: #e7bdb7;
            --md-sys-color-on-secondary: #442926;
            --md-sys-color-secondary-container: #5d3f3b;
            --md-sys-color-on-secondary-container: #ffdad5;
            --md-sys-color-tertiary: #dfc38c;
            --md-sys-color-on-tertiary: #3e2e04;
            --md-sys-color-tertiary-container: #574419;
            --md-sys-color-on-tertiary-container: #fcdfa6;
            --md-sys-color-error: #ffb4ab;
            --md-sys-color-on-error: #690005;
            --md-sys-color-error-container: #93000a;
            --md-sys-color-on-error-container: #ffdad6;
            --md-sys-color-background: #1a1110;
            --md-sys-color-on-background: #ede0dd;
            --md-sys-color-surface: #1a1110;
            --md-sys-color-on-surface: #ede0dd;
            --md-sys-color-on-surface-variant: #d8c2bf;
            --md-sys-color-surface-container-lowest: #120d0c;
            --md-sys-color-surface-container-low: #201a19;
            --md-sys-color-surface-container: #251e1d;
            --md-sys-color-surface-container-high: #2f2827;
            --md-sys-color-surface-container-highest: #3b3332;
            --md-sys-color-surface-dim: #1a1110;
            --md-sys-color-outline: #a08c8a;
            --md-sys-color-outline-variant: #534341;
            --md-sys-color-inverse-surface: #ede0dd;
            --md-sys-color-inverse-on-surface: #362f2e;
            --md-sys-color-inverse-primary: #8b1a1a;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--md-sys-color-background); color: var(--md-sys-color-on-surface); }
        .header {
            background: linear-gradient(135deg, #1a1a2e 0%, #2d1518 100%);
            color: #fff; padding: 12px 24px;
            display: flex; align-items: center; gap: 12px;
            border-bottom: 3px solid #b8860b;
        }
        .header img { height: 44px; width: auto; }
        .header-text h1 { font-size: 1.1rem; font-weight: 700; line-height: 1.2; }
        .header-text .subtitle { font-size: 0.7rem; color: #b8860b; text-transform: uppercase; letter-spacing: 0.1em; }
        .container { max-width: 640px; margin: 24px auto; padding: 0 16px; }
        .card { background: var(--md-sys-color-surface-container-low); border-radius: 12px; padding: 24px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .card h2 { margin-bottom: 16px; color: var(--md-sys-color-on-surface); }
        .history-item { padding: 12px 0; border-bottom: 1px solid var(--md-sys-color-outline-variant); font-size: 0.875rem; color: var(--md-sys-color-on-surface); }
        .history-item:last-child { border-bottom: none; }
        .history-date { color: var(--md-sys-color-on-surface-variant); font-size: 0.75rem; }
        .history-notes { color: var(--md-sys-color-on-surface-variant); font-size: 0.8rem; margin-top: 4px; font-style: italic; }
        a { color: var(--md-sys-color-primary); text-decoration: none; }
        a:hover { text-decoration: underline; }
        .back { margin-top: 16px; display: block; text-align: center; }

        .dark-toggle {
            background: none; border: 1px solid #b8860b; color: #b8860b;
            padding: 4px 10px; border-radius: 6px; font-size: 0.75rem;
            cursor: pointer; font-weight: 600;
        }
        .dark-toggle:hover { background: rgba(184,134,11,0.2); }
    </style>
</head>
<body>
    <div class="header" style="justify-content:space-between;">
        <a href="/dashboard/" style="display:flex; align-items:center; gap:12px; text-decoration:none; color:#fff;">
            <img src="{% static 'inventory/img/logo.png' %}" alt="Fire &amp; Risk Alliance">
            <div class="header-text">
                <h1>Fire &amp; Risk Alliance</h1>
                <div class="subtitle">Inventory Management System</div>
            </div>
        </a>
        <button class="dark-toggle" onclick="toggleDarkMode()" id="darkToggle">Dark Mode</button>
    </div>
    <div class="container">
        <div class="card">
            <h2>{{ item.manufacturer }} - Box {{ item.box_id }}</h2>
            {% for h in history %}
            <div class="history-item">
                <strong>{{ h.old_status_label }}</strong> &rarr; <strong>{{ h.new_status_label }}</strong>
                <div class="history-date">{{ h.changed_at|date:"M d, Y H:i:s" }}</div>
                {% if h.notes %}<div class="history-notes">{{ h.notes }}</div>{% endif %}
            </div>
            {% empty %}
            <p style="color:var(--md-sys-color-outline);">No status changes recorded yet.</p>
            {% endfor %}
        </div>
        <a class="back" href="/dashboard/">Back to Dashboard</a>
    </div>
    <script>
        function toggleDarkMode() {
            var isDark = document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', isDark ? '1' : '0');
            document.getElementById('darkToggle').textContent = isDark ? 'Light Mode' : 'Dark Mode';
        }
        if (localStorage.getItem('darkMode') === '1') {
            document.body.classList.add('dark-mode');
            document.getElementById('darkToggle').textContent = 'Light Mode';
        }
    </script>
</body>
</html>
